<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>참치세탁소 - 마이페이지</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <link rel="stylesheet" href="../static/css/usersmypage.css">

</head>
<body>
  <section class="topnav">
    <div>
      참치세탁소
    <ul class="nav nav-tabs justify-content-end">
      <li class="nav-item">
        <a class="nav-link" href="userslaundry">세탁물 목록</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="laundryrequest">나의 세탁</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/usersreview">리뷰페이지</a>
      </li>
      <li class="nav-item">
        <a class="na-active nav-link active" aria-current="page" href="/usersmypage">마이페이지</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" onclick="signOut()">로그아웃</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true"></a>
      </li>
    </ul>
  </section>

  <section class="request">
    <div class="reqcontent">

      <div class="mb-3 row">
        <label for="staticID" class="col-sm-2 col-form-label">ID</label>
        <div class="col-sm-10">
          <input type="text" readonly class="form-control-plaintext" id="staticID" value="아이디값">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="inputPassword" class="col-sm-2 col-form-label">Password</label>
        <div class="col-sm-10">
          <input type="password" class="form-control" id="inputPassword">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="inputPhone" class="col-sm-2 col-form-label">Phone</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputPhone">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="inputAddress" class="col-sm-2 col-form-label">Address</label>
        <div class="col-sm-10">
          <input type="text" class="form-control" id="inputAddress">
        </div>
      </div>

      <div class="d-grid gap-2 d-md-flex justify-content-md-end">
        <a onclick="updateUser()"><button class="btn btn-primary me-md-2" type="button">수정 완료</button></a>
        <a onclick="history.back()"><button class="btn btn-danger me-md-2" type="button">취소</button></a>
      </div>
            

    </div>
  </section>

  <script
      src="https://code.jquery.com/jquery-3.5.1.js"
      integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
      integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
      crossorigin="anonymous"
    ></script>
    <script>
      function updateUser() {
        const password = $("#inputPassword").val();
        const phone = $("#inputPhone").val();
        const address = $("#inputAddress").val();

        $.ajax({
          type: "POST",
          url: "/mypage",
          data: {
            password: password,
            phone: phone,
            address: address,
          },
          success: function (response) {
            alert("수정완료!", function () {
              window.location.replace("/");
            });
          },
          error: function (error) {
            alert(error.responseJSON.errorMessage);
          },
        });
      }
      function signOut() {
      localStorage.clear();
      window.location.href = "/";
      }
    </script>

</body>
</html>